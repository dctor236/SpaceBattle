declare module "module_gm" {
    export abstract class DropdownItem extends mw.UIScript {
        list?: DropdownList<any>;
        data?: any;
    }
    interface IGMUI extends mw.UIScript {
        okButton: mw.Button;
        cmdPanel: mw.PanelWidget;
        dropList: mw.ScrollBox;
        argText: mw.InputBox;
        groupButton: mw.StaleButton;
        cmdButton: mw.StaleButton;
    }
    export class DropdownList<T extends DropdownItem> {
        private _root;
        private _itemCls;
        private space;
        /**
         * 不显示的缓存道具
         */
        private _cache;
        /**
         * 显示的道具
         */
        private _items;
        private _isDropdown;
        onSelect: Action1<string>;
        constructor(_root: IGMUI, _itemCls: {
            new (): T;
        }, space?: number);
        /**
      * 添加展开按钮事件
      */
        toggle(): void;
        /**
         * 添加展开按钮事件
         */
        expand(): void;
        /**
         * 添加展开按钮事件
         */
        unExpand(): void;
        /**
         * 添加一个选项
         * @param node
         * @param index 索引
         */
        addItem(data: any, index?: number): void;
        /**
         * 删除一个选项
         * @param node
         */
        removeItem(node: any): void;
        clear(): void;
        /**
         * 删除一个指定索引
         * @param index
         */
        removeItemAt(index: any): void;
        /**
         * 获取一个选项,超出范围则返回空
         * @param index
         */
        getItem(index: any): T;
        get size(): number;
        /**
         * 重新对齐面板
         */
        _invalidateLayout(): void;
    }
}

declare module "module_gm" {
    export class GMService {
        private static _instance;
        static get instance(): GMService;
        /**
         * 初始化UI
         */
        createUI(dropDownList: DropdownList<any>): void;
        /**
         * 初始化配置
         */
        constructor();
        /**
         * 调用命令
         * @param data
         */
        cmd(data: GMData, param: string): void;
    }
}

declare module "module_gm" {
    export type GMData = {
        label: string;
        group: string;
        clientCmd?: (player: mw.Player, value: string) => void;
        serverCmd?: (player: mw.Player, value: string) => void;
        shortKey?: mw.Keys;
    };
    export const GMConfig: any[];
    /**
     * 添加GM命令
     * @param label 名称
     * @param cmdClient 客户端命令
     * @param cmdServer 服务端命令
     * @param shortKey 快捷键
     */
    export function AddGMCommand(label: string, cmdClient?: (player: mw.Player, value: string) => void, cmdServer?: (player: mw.Player, value: string) => void, group?: string, shortKey?: mw.Keys): void;
}

declare module "module_gm" {
    interface IGMItem extends DropdownItem {
        button: mw.StaleButton;
    }
    interface IGMUI extends mw.UIScript {
        okButton: mw.Button;
        cmdPanel: mw.PanelWidget;
        dropList: mw.ScrollBox;
        argText: mw.InputBox;
        groupButton: mw.StaleButton;
        cmdButton: mw.StaleButton;
    }
    export abstract class GMBasePanel<T extends IGMUI, I extends IGMItem> {
        private dropDownList;
        private isGroup;
        private groupText;
        private cmdText;
        private _view;
        constructor(_viewCls: {
            new (): T;
        }, _itemCls: {
            new (): I;
        });
        show(): void;
    }
}

declare module "module_gm" {
    export namespace GM {
        let getParam: () => string;
        function start(uiClass: {
            new (): Required<GMBasePanel<any, any>>;
        }): void;
    }
}
